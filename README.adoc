# cryptowrap image:https://godoc.org/github.com/Djarvur/go-cryptowrap?status.svg["GoDoc",link="http://godoc.org/github.com/Djarvur/go-cryptowrap"] image:https://travis-ci.org/Djarvur/go-cryptowrap.svg["Build Status",link="https://travis-ci.org/Djarvur/go-cryptowrap"] image:https://coveralls.io/repos/Djarvur/go-cryptowrap/badge.svg?branch=master&service=github["Coverage Status",link="https://coveralls.io/github/Djarvur/go-cryptowrap?branch=master"]

JSON-based Marshaler/Unmarshaler with AES encryption

cryptowrap.Wrapper is a struct with custom JSON marshaler and unmarshaler.

Marshaler will encrypt Payload with AES using first value from Keys as a key
and provided IV as an initialisation vector.
Random string will be used if no IV provided.

Actual AES form will be chosen based on first Keys value length.

Serialised data are protected by checksum.

Unmarshaler will decrypt Payload with the Keys provided.
Keys will be tryied one by one until success decryption. Success means checksum check satisfied.
ErrUndecryptable will be returned in case no one key is suitable.

## Benchmark

Raw is no-encryption wrapper, just to compare with crypto.

```
$go test -bench=. -benchmem
goos: darwin
goarch: amd64
pkg: github.com/Djarvur/cryptowrap
BenchmarkRaw-4          500000    2359 ns/op    392 B/op   11 allocs/op
BenchmarkWrapper128-4   100000   15665 ns/op   4033 B/op   58 allocs/op
BenchmarkWrapper256-4   100000   18153 ns/op   4713 B/op   58 allocs/op
PASS
ok  	github.com/Djarvur/cryptowrap	4.949s
```
